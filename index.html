<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ëŒ€ê¸°ëŒ€ìˆœí™˜ ì‹œë®¬ë ˆì´í„°</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', sans-serif; background: #1a1a2e; min-height: 100vh; display: flex; flex-direction: column; }
        .header { background: linear-gradient(135deg, #0f1419 0%, #1a2332 100%); color: white; padding: 15px 30px; border-bottom: 3px solid #2c3e50; }
        .header h1 { font-size: 1.6em; margin: 0; }
        .header p { font-size: 0.8em; opacity: 0.8; margin-top: 3px; }
        .main-container { display: flex; flex: 1; overflow: hidden; }
        .earth-viewer { flex: 1; position: relative; background: #000814; }
        #canvas-container { width: 100%; height: 100%; }
        .loading { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 1.2em; background: rgba(0, 0, 0, 0.7); padding: 20px 40px; border-radius: 10px; }
        .sidebar { width: 340px; background: #f8f9fa; overflow-y: auto; padding: 15px; border-left: 2px solid #cbd5e0; }
        .control-section { background: white; border-radius: 8px; padding: 12px; margin-bottom: 12px; box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08); }
        .control-section h3 { font-size: 0.95em; margin-bottom: 10px; color: #1a2332; border-bottom: 2px solid #2c5282; padding-bottom: 5px; }
        .control-group { margin-bottom: 10px; }
        .control-group:last-child { margin-bottom: 0; }
        .control-group label { display: block; font-weight: 600; margin-bottom: 6px; color: #2c3e50; font-size: 0.8em; }
        .button-group { display: flex; gap: 6px; flex-wrap: wrap; }
        button { padding: 8px 14px; border: none; border-radius: 5px; font-size: 0.8em; font-weight: 600; cursor: pointer; transition: all 0.3s; flex: 1; min-width: 90px; }
        button:hover { transform: translateY(-1px); box-shadow: 0 3px 6px rgba(0,0,0,0.2); }
        .btn-primary { background: #2c5282; color: white; }
        .btn-primary:hover { background: #2a4365; }
        .btn-secondary { background: #4a5568; color: white; }
        .btn-secondary:hover { background: #2d3748; }
        .btn-success { background: #2d5f8d; color: white; }
        .btn-success:hover { background: #1e4266; }
        .btn-active { background: #c53030; }
        .btn-active:hover { background: #9b2c2c; }
        .slider-container { display: flex; flex-direction: column; gap: 8px; }
        .slider-row { display: flex; align-items: center; gap: 8px; }
        input[type="range"] { flex: 1; height: 5px; border-radius: 3px; background: #cbd5e0; outline: none; -webkit-appearance: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; border-radius: 50%; background: #2c5282; cursor: pointer; transition: all 0.3s; }
        input[type="range"]::-webkit-slider-thumb:hover { background: #2a4365; transform: scale(1.2); }
        input[type="range"]::-moz-range-thumb { width: 16px; height: 16px; border-radius: 50%; background: #2c5282; cursor: pointer; border: none; }
        .month-display { font-size: 1.3em; font-weight: 700; color: #2c5282; min-width: 50px; text-align: center; }
        input[type="number"] { padding: 6px; border: 2px solid #cbd5e0; border-radius: 5px; font-size: 0.8em; width: 60px; text-align: center; }
        input[type="number"]:focus { outline: none; border-color: #2c5282; }
        .month-labels { display: flex; justify-content: space-between; font-size: 0.7em; color: #4a5568; margin-top: 3px; }
        .info-item { display: flex; justify-content: space-between; padding: 6px 0; border-bottom: 1px solid #e9ecef; font-size: 0.85em; }
        .info-item:last-child { border-bottom: none; }
        .info-item strong { color: #2c3e50; }
        .info-item span { color: #4a5568; font-weight: 600; }
        .legend-item { display: flex; align-items: center; margin: 6px 0; }
        .legend-color { width: 24px; height: 16px; border-radius: 3px; margin-right: 8px; flex-shrink: 0; }
        .legend-item span { font-size: 0.75em; color: #2c3e50; line-height: 1.3; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸŒ ëŒ€ê¸°ëŒ€ìˆœí™˜ ì‹œë®¬ë ˆì´í„°</h1>
        <p>ì§€êµ¬ì˜ ëŒ€ê¸° ìˆœí™˜ê³¼ ITCZì˜ ê³„ì ˆë³„ ë³€í™”ë¥¼ ê´€ì°°í•˜ì„¸ìš”</p>
    </div>
    <div class="main-container">
        <div class="earth-viewer">
            <div id="canvas-container"><div class="loading">ì§€êµ¬ í…ìŠ¤ì²˜ ë¡œë”© ì¤‘...</div></div>
        </div>
        <div class="sidebar">
            <div class="control-section">
                <h3>ğŸ“… ì›”ë³„ ì‹œë®¬ë ˆì´ì…˜</h3>
                <div class="control-group">
                    <div class="slider-container">
                        <div class="slider-row">
                            <div class="month-display" id="month-display">1ì›”</div>
                            <input type="range" id="month-slider" min="1" max="12" value="1" oninput="updateMonth(this.value)">
                            <input type="number" id="month-input" min="1" max="12" value="1" onchange="updateMonth(this.value)" onkeypress="handleEnter(event)">
                        </div>
                        <div class="month-labels"><span>1ì›”</span><span>6ì›”</span><span>12ì›”</span></div>
                    </div>
                </div>
            </div>
            <div class="control-section">
                <h3>âš™ï¸ ì»¨íŠ¸ë¡¤</h3>
                <div class="control-group">
                    <label>ì§€êµ¬ ê¸°ìš¸ê¸°</label>
                    <div class="button-group">
                        <button id="btn-upright" class="btn-secondary" onclick="switchTilt('upright')">ì •ë¶</button>
                        <button id="btn-tilted" class="btn-primary" onclick="switchTilt('tilted')">23.5Â°</button>
                    </div>
                </div>
                <div class="control-group">
                    <label>ìˆœí™˜ Cell & ì§€êµ¬ ìì „</label>
                    <div class="button-group">
                        <button id="btn-cells" class="btn-primary" onclick="toggleCells()">Cell í‘œì‹œ</button>
                        <button id="btn-rotation" class="btn-primary" onclick="toggleRotation()">ìì „ ì¤‘</button>
                    </div>
                </div>
                <div class="control-group">
                    <label>ì¬ìƒ</label>
                    <div class="button-group">
                        <button id="btn-play" class="btn-success" onclick="togglePlay()">â–¶ ì¬ìƒ</button>
                        <button class="btn-secondary" onclick="resetMonth()">â†º ì´ˆê¸°í™”</button>
                    </div>
                </div>
            </div>
            <div class="control-section">
                <h3>ğŸ“Š í˜„ì¬ ìƒíƒœ</h3>
                <div class="info-item"><strong>ì›”:</strong><span id="info-month">1ì›”</span></div>
                <div class="info-item"><strong>ITCZ:</strong><span id="info-itcz">-</span></div>
                <div class="info-item"><strong>ê¸°ìš¸ê¸°:</strong><span id="info-tilt">23.5Â° ê¸°ìš¸ì„</span></div>
            </div>
            <div class="control-section">
                <h3>ğŸ¨ ë²”ë¡€</h3>
                <div class="legend-item"><div class="legend-color" style="background-color: #f44336;"></div><span>ë¬´ì—­í’</span></div>
                <div class="legend-item"><div class="legend-color" style="background-color: #ff9800;"></div><span>í¸ì„œí’</span></div>
                <div class="legend-item"><div class="legend-color" style="background-color: #ffeb3b;"></div><span>ê·¹ë™í’</span></div>
                <div class="legend-item"><div class="legend-color" style="background-color: #e74c3c;"></div><span>ITCZ</span></div>
                <div class="legend-item"><div class="legend-color" style="background: linear-gradient(90deg, rgba(255,140,0,0.3), rgba(255,140,0,0.6));"></div><span>í•´ë“¤ë¦¬ ìˆœí™˜</span></div>
            </div>
        </div>
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
let scene,camera,renderer,earthGroup,globe,currentMonth=1,targetMonth=1,animationProgress=0,currentTilt='tilted',isPlaying=false,playInterval,showCells=true,isRotating=true,earthTexture=null,textureLoaded=false,animationOffset=0;
let hadleyArrows=[];

function removeLoadingMessage(){const l=document.querySelector('.loading');if(l)l.remove();}
function initThreeJS(){const c=document.getElementById('canvas-container');scene=new THREE.Scene();scene.background=new THREE.Color(0x000814);camera=new THREE.PerspectiveCamera(45,c.clientWidth/c.clientHeight,0.1,1000);camera.position.z=3;renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(c.clientWidth,c.clientHeight);renderer.setPixelRatio(window.devicePixelRatio);c.innerHTML='';c.appendChild(renderer.domElement);const aL=new THREE.AmbientLight(0xffffff,0.7);scene.add(aL);const dL=new THREE.DirectionalLight(0xffffff,0.6);dL.position.set(5,3,5);scene.add(dL);createStars();loadEarthTexture();let isDragging=false,prevMouse={x:0,y:0};c.addEventListener('mousedown',e=>{isDragging=true;prevMouse={x:e.clientX,y:e.clientY};});c.addEventListener('mousemove',e=>{if(isDragging&&earthGroup){const dX=e.clientX-prevMouse.x,dY=e.clientY-prevMouse.y;earthGroup.rotation.y+=dX*0.005;earthGroup.rotation.x+=dY*0.005;earthGroup.rotation.x=Math.max(-Math.PI/2,Math.min(Math.PI/2,earthGroup.rotation.x));prevMouse={x:e.clientX,y:e.clientY};}});c.addEventListener('mouseup',()=>{isDragging=false;});c.addEventListener('mouseleave',()=>{isDragging=false;});c.addEventListener('wheel',e=>{e.preventDefault();camera.position.z+=e.deltaY*0.001;camera.position.z=Math.max(1.5,Math.min(5,camera.position.z));});animate();}
function createStars(){const g=new THREE.BufferGeometry(),v=[];for(let i=0;i<10000;i++){const x=(Math.random()-0.5)*2000,y=(Math.random()-0.5)*2000,z=(Math.random()-0.5)*2000;v.push(x,y,z);}g.setAttribute('position',new THREE.Float32BufferAttribute(v,3));const m=new THREE.PointsMaterial({color:0xffffff,size:2});const s=new THREE.Points(g,m);scene.add(s);}
function loadEarthTexture(){const l=new THREE.TextureLoader(),t=['https://unpkg.com/three-globe@2.24.9/example/img/earth-day.jpg','https://unpkg.com/three-globe@2.24.9/example/img/earth-blue-marble.jpg'];let idx=0;function tryLoad(){l.load(t[idx],tx=>{earthTexture=tx;textureLoaded=true;removeLoadingMessage();createGlobe();},undefined,err=>{idx++;if(idx<t.length)tryLoad();else{textureLoaded=true;removeLoadingMessage();createGlobe();}});}tryLoad();}
function createGlobe(){let cRY=0,cRX=0;if(earthGroup){cRY=earthGroup.rotation.y;cRX=earthGroup.rotation.x;scene.remove(earthGroup);}hadleyArrows=[];earthGroup=new THREE.Group();const g=new THREE.SphereGeometry(1,64,64);let m;if(earthTexture)m=new THREE.MeshPhongMaterial({map:earthTexture,shininess:5});else m=new THREE.MeshPhongMaterial({color:0x2233ff});globe=new THREE.Mesh(g,m);earthGroup.add(globe);createCirculationOverlay();if(showCells)addHadleyCell();earthGroup.rotation.z=currentTilt==='tilted'?23.5*Math.PI/180:0;earthGroup.rotation.y=cRY;earthGroup.rotation.x=cRX;scene.add(earthGroup);}
function createCirculationOverlay(){const cv=document.createElement('canvas');cv.width=2048;cv.height=1024;const ctx=cv.getContext('2d');ctx.clearRect(0,0,cv.width,cv.height);drawAtmosphericCirculation(ctx,cv.width,cv.height);const tx=new THREE.CanvasTexture(cv);const m=new THREE.MeshBasicMaterial({map:tx,transparent:true,opacity:0.85,depthWrite:false});const g=new THREE.SphereGeometry(1.01,64,64);const o=new THREE.Mesh(g,m);earthGroup.add(o);}
function drawAtmosphericCirculation(ctx,w,h){const iL=calculateITCZLatitude(currentMonth),iY=h*(0.5-iL/90*0.5);updateITCZInfo(iL);const l30N=h*(0.5-(iL+30)/90*0.5),l30S=h*(0.5-(iL-30)/90*0.5),l60N=h*(0.5-(iL+60)/90*0.5),l60S=h*(0.5-(iL-60)/90*0.5);ctx.strokeStyle='rgba(231,76,60,1)';ctx.lineWidth=6;ctx.setLineDash([20,10]);ctx.beginPath();ctx.moveTo(0,iY);ctx.lineTo(w,iY);ctx.stroke();ctx.setLineDash([]);ctx.strokeStyle='rgba(255,255,255,0.3)';ctx.lineWidth=2;for(let lat=-90;lat<=90;lat+=30){const y=h*(0.5-(iL+lat)/90*0.5);ctx.beginPath();ctx.moveTo(0,y);ctx.lineTo(w,y);ctx.stroke();}const pN=h*(0.5-(iL+85)/90*0.5),pS=h*(0.5-(iL-85)/90*0.5);drawTradeWinds(ctx,w,iY,l30N,l30S);drawWesterlies(ctx,w,iY,l30N,l30S,l60N,l60S);drawPolarEasterlies(ctx,w,iY,l60N,l60S,pN,pS);}
function addHadleyCell(){const iL=calculateITCZLatitude(currentMonth),r=1.15;const phiN1=(90-Math.max(iL,30))*Math.PI/180,phiN2=(90-Math.min(iL,30))*Math.PI/180;const gN=new THREE.SphereGeometry(r,64,32,0,Math.PI*2,phiN1,phiN2-phiN1);const mN=new THREE.MeshBasicMaterial({color:0xff8c00,transparent:true,opacity:0.15,side:THREE.DoubleSide});const sN=new THREE.Mesh(gN,mN);const wN=new THREE.WireframeGeometry(gN);const lN=new THREE.LineSegments(wN,new THREE.LineBasicMaterial({color:0xff8c00,transparent:true,opacity:0.3}));sN.add(lN);earthGroup.add(sN);const phiS1=(90-Math.max(iL,-30))*Math.PI/180,phiS2=(90-Math.min(iL,-30))*Math.PI/180;const gS=new THREE.SphereGeometry(r,64,32,0,Math.PI*2,phiS1,phiS2-phiS1);const mS=new THREE.MeshBasicMaterial({color:0xff8c00,transparent:true,opacity:0.15,side:THREE.DoubleSide});const sS=new THREE.Mesh(gS,mS);const wS=new THREE.WireframeGeometry(gS);const lS=new THREE.LineSegments(wS,new THREE.LineBasicMaterial({color:0xff8c00,transparent:true,opacity:0.3}));sS.add(lS);earthGroup.add(sS);addHadleyCellArrows();}
function addHadleyCellArrows(){const iL=calculateITCZLatitude(currentMonth),n=16;for(let i=0;i<n;i++){const a=(i/n)*Math.PI*2;addCirculationArrow3D(a,iL,30,0xff8c00);addCirculationArrow3D(a,iL,-30,0xff8c00);}}
function addCirculationArrow3D(angle,lat1,lat2,color){const pts=[],s=40;const itczLat=lat1;const highLat=lat2;for(let i=0;i<=s/4;i++){const t=i/(s/4),r=1.0+t*0.15,lat=itczLat,phi=(90-lat)*Math.PI/180,theta=angle;pts.push(new THREE.Vector3(r*Math.sin(phi)*Math.cos(theta),r*Math.cos(phi),r*Math.sin(phi)*Math.sin(theta)));}for(let i=0;i<=s/4;i++){const t=i/(s/4),lat=itczLat+(highLat-itczLat)*t,r=1.15,phi=(90-lat)*Math.PI/180,theta=angle;pts.push(new THREE.Vector3(r*Math.sin(phi)*Math.cos(theta),r*Math.cos(phi),r*Math.sin(phi)*Math.sin(theta)));}for(let i=0;i<=s/4;i++){const t=i/(s/4),r=1.15-t*0.15,lat=highLat,phi=(90-lat)*Math.PI/180,theta=angle;pts.push(new THREE.Vector3(r*Math.sin(phi)*Math.cos(theta),r*Math.cos(phi),r*Math.sin(phi)*Math.sin(theta)));}for(let i=0;i<=s/4;i++){const t=i/(s/4),lat=highLat+(itczLat-highLat)*t,r=1.0,phi=(90-lat)*Math.PI/180,theta=angle;pts.push(new THREE.Vector3(r*Math.sin(phi)*Math.cos(theta),r*Math.cos(phi),r*Math.sin(phi)*Math.sin(theta)));}const arrowHead=new THREE.ConeGeometry(0.02,0.06,8);const arrowMat=new THREE.MeshBasicMaterial({color:color,transparent:true,opacity:0.9});const cone=new THREE.Mesh(arrowHead,arrowMat);earthGroup.add(cone);const tailSpheres=[];for(let i=0;i<20;i++){const sphereGeom=new THREE.SphereGeometry(0.008,8,8);const sphereMat=new THREE.MeshBasicMaterial({color:color,transparent:true,opacity:0.85});const sphere=new THREE.Mesh(sphereGeom,sphereMat);sphere.visible=false;earthGroup.add(sphere);tailSpheres.push(sphere);}hadleyArrows.push({points:pts,cone:cone,tailSpheres:tailSpheres,progress:Math.random(),totalLength:pts.length});}
function calculateITCZLatitude(month){let eM=month;if(isPlaying&&animationProgress>0&&animationProgress<1){const pM=currentMonth;let nM=targetMonth;if(pM===12&&nM===1)nM=13;else if(pM===1&&nM===12){eM=1-(1-0)*animationProgress;const a=2*Math.PI*(eM-3)/12;return 23.5*Math.sin(a);}eM=pM+(nM-pM)*animationProgress;}const a=2*Math.PI*(eM-3)/12;return 23.5*Math.sin(a);}
function updateITCZInfo(lat){const s=lat>=0?`ë¶ìœ„ ${lat.toFixed(1)}Â°`:`ë‚¨ìœ„ ${Math.abs(lat).toFixed(1)}Â°`;document.getElementById('info-itcz').textContent=s;}
function drawTradeWinds(ctx,w,iY,l30N,l30S){const sp=w/20,n=20;for(let i=0;i<n;i++){const x=i*sp+sp/2;const sYN=(l30N+iY)/2-60,eYN=(l30N+iY)/2+30;drawCurvedArrow(ctx,x+70,sYN,x-20,eYN,40,'#f44336',3);const sYS=(l30S+iY)/2+60,eYS=(l30S+iY)/2-30;drawCurvedArrow(ctx,x+70,sYS,x-20,eYS,40,'#f44336',3);}}
function drawWesterlies(ctx,w,iY,l30N,l30S,l60N,l60S){const sp=w/20,n=20;for(let i=0;i<n;i++){const x=i*sp+sp/2;const sYN=(l30N+l60N)/2+30,eYN=(l30N+l60N)/2-60;drawCurvedArrow(ctx,x-20,sYN,x+70,eYN,-40,'#ff9800',3);const sYS=(l30S+l60S)/2-30,eYS=(l30S+l60S)/2+60;drawCurvedArrow(ctx,x-20,sYS,x+70,eYS,-40,'#ff9800',3);}}
function drawPolarEasterlies(ctx,w,iY,l60N,l60S,pN,pS){const sp=w/20,n=20;for(let i=0;i<n;i++){const x=i*sp+sp/2;const mYN=(l60N+pN)/2;drawCurvedArrow(ctx,x+60,mYN-15,x-30,mYN+30,40,'#ffeb3b',3);const mYS=(l60S+pS)/2;drawCurvedArrow(ctx,x+60,mYS+15,x-30,mYS-30,40,'#ffeb3b',3);}}
function drawCurvedArrow(ctx,x1,y1,x2,y2,curv,color,lw){ctx.strokeStyle=color;ctx.fillStyle=color;ctx.lineWidth=lw;const mX=(x1+x2)/2,mY=(y1+y2)/2,cX=mX+curv,cY=mY;const dL=15,gL=10;ctx.setLineDash([dL,gL]);ctx.lineDashOffset=-animationOffset;ctx.beginPath();ctx.moveTo(x1,y1);ctx.quadraticCurveTo(cX,cY,x2,y2);ctx.stroke();ctx.setLineDash([]);const t=0.95,dX=2*(1-t)*(cX-x1)+2*t*(x2-cX),dY=2*(1-t)*(cY-y1)+2*t*(y2-cY),angle=Math.atan2(dY,dX),aL=12;ctx.beginPath();ctx.moveTo(x2,y2);ctx.lineTo(x2-aL*Math.cos(angle-Math.PI/6),y2-aL*Math.sin(angle-Math.PI/6));ctx.lineTo(x2-aL*Math.cos(angle+Math.PI/6),y2-aL*Math.sin(angle+Math.PI/6));ctx.closePath();ctx.fill();}
function animate(){requestAnimationFrame(animate);animationOffset+=0.5;if(animationOffset>25)animationOffset=0;if(earthGroup&&earthGroup.children[1]){const overlay=earthGroup.children[1];const cv=document.createElement('canvas');cv.width=2048;cv.height=1024;const ctx=cv.getContext('2d');ctx.clearRect(0,0,cv.width,cv.height);drawAtmosphericCirculation(ctx,cv.width,cv.height);const tx=new THREE.CanvasTexture(cv);overlay.material.map=tx;overlay.material.needsUpdate=true;}hadleyArrows.forEach(arr=>{arr.progress+=0.003;if(arr.progress>1)arr.progress=0;const idx=Math.floor(arr.progress*arr.totalLength);if(idx<arr.totalLength&&idx>=0){arr.cone.position.copy(arr.points[idx]);arr.cone.visible=true;if(idx>0){const dir=new THREE.Vector3().subVectors(arr.points[idx],arr.points[idx-1]).normalize();const axis=new THREE.Vector3(0,1,0);arr.cone.quaternion.setFromUnitVectors(axis,dir);}arr.tailSpheres.forEach((sphere,i)=>{const tIdx=idx-i*2-1;if(tIdx>=0&&tIdx<arr.totalLength){sphere.position.copy(arr.points[tIdx]);sphere.visible=true;}else{sphere.visible=false;}});}else{arr.cone.visible=false;arr.tailSpheres.forEach(s=>s.visible=false);}});if(isPlaying&&targetMonth!==currentMonth){animationProgress+=0.02;if(animationProgress>=1.0){currentMonth=targetMonth;if(currentMonth>12)currentMonth=1;animationProgress=0;createGlobe();}else{createGlobe();}}if(earthGroup&&isRotating)earthGroup.rotation.y+=0.001;if(renderer&&scene&&camera)renderer.render(scene,camera);}
function updateMonth(v){const nM=parseInt(v);if(isPlaying){targetMonth=nM;animationProgress=0;}else{currentMonth=nM;targetMonth=nM;animationProgress=0;createGlobe();}document.getElementById('month-slider').value=nM;document.getElementById('month-input').value=nM;document.getElementById('month-display').textContent=`${nM}ì›”`;document.getElementById('info-month').textContent=`${nM}ì›”`;}
function handleEnter(e){if(e.key==='Enter')updateMonth(e.target.value);}
function switchTilt(t){currentTilt=t;document.getElementById('btn-upright').className=t==='upright'?'btn-primary':'btn-secondary';document.getElementById('btn-tilted').className=t==='tilted'?'btn-primary':'btn-secondary';document.getElementById('info-tilt').textContent=t==='upright'?'ì •ë¶ ë°©í–¥':'23.5Â° ê¸°ìš¸ì„';if(earthGroup)earthGroup.rotation.z=t==='tilted'?23.5*Math.PI/180:0;}
function toggleCells(){showCells=!showCells;const btn=document.getElementById('btn-cells');if(showCells){btn.textContent='Cell í‘œì‹œ';btn.className='btn-primary';}else{btn.textContent='Cell ìˆ¨ê¹€';btn.className='btn-secondary';}createGlobe();}
function toggleRotation(){isRotating=!isRotating;const btn=document.getElementById('btn-rotation');if(isRotating){btn.textContent='ìì „ ì¤‘';btn.className='btn-primary';}else{btn.textContent='ì •ì§€ ì¤‘';btn.className='btn-secondary';}}
function togglePlay(){isPlaying=!isPlaying;const btn=document.getElementById('btn-play');if(isPlaying){btn.textContent='â¸ ì •ì§€';btn.className='btn-active';playInterval=setInterval(()=>{if(animationProgress===0){targetMonth=(currentMonth%12)+1;updateMonth(targetMonth);}},2000);}else{btn.textContent='â–¶ ì¬ìƒ';btn.className='btn-success';clearInterval(playInterval);}}
function resetMonth(){updateMonth(1);}
window.addEventListener('DOMContentLoaded',()=>{document.getElementById('btn-tilted').className='btn-primary';document.getElementById('btn-upright').className='btn-secondary';});
if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',()=>{initThreeJS();});}else{initThreeJS();}
window.addEventListener('resize',()=>{if(renderer&&camera){const c=document.getElementById('canvas-container');camera.aspect=c.clientWidth/c.clientHeight;camera.updateProjectionMatrix();renderer.setSize(c.clientWidth,c.clientHeight);}});
    </script>
</body>
</html>
